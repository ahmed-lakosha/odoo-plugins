---
title: 'Generate Test Skeleton'
read_only: false
type: 'command'
description: 'Generate a complete test class skeleton for an Odoo model with CRUD, compute, constraint, and onchange tests'
---

# /test-generate <model> [options]

Generate a production-quality test file for an Odoo model. Reads the model's Python source to detect fields and methods, then creates a complete `TransactionCase` test class with setUp, CRUD tests, compute field tests, constraint tests, and action method stubs.

## Usage

```
/test-generate sale.order
/test-generate my.model --module /c/odoo/odoo17/projects/myproject/my_module
/test-generate hr.employee --module /path/to/module --output /custom/path/test_employee.py
/test-generate my.model --dry-run
```

## Natural Language Triggers

```
"Generate tests for sale.order"
"Create test skeleton for my.model"
"Write unit tests for the employee module"
"Make test file for the property model"
"I need tests for my hr_custom module"
```

## Implementation

```python
import sys
import subprocess
from pathlib import Path

args_str = "${ARGS}".strip()
args_parts = args_str.split()

if not args_parts:
    print("Usage: /test-generate <model.name> [--module /path] [--output /path] [--dry-run]")
    print()
    print("Examples:")
    print("  /test-generate sale.order")
    print("  /test-generate my.model --module /c/odoo/odoo17/projects/myproject/my_module")
    print("  /test-generate hr.employee --dry-run")
    sys.exit(1)

model_name = args_parts[0]
extra_args = args_parts[1:]

# Build command
script = Path(r"${PLUGIN_DIR}/odoo-test/scripts/test_generator.py")
cmd = [sys.executable, str(script), "--model", model_name] + extra_args

print(f"Generating test skeleton for model: {model_name}")
print(f"Command: {' '.join(cmd)}")
print()

result = subprocess.run(cmd, capture_output=False, text=True)
sys.exit(result.returncode)
```

## Generated File Structure

The command generates a file with this structure:

```python
"""
Tests for my.model (My Model Description)
Generated by odoo-test-plugin on 2024-01-15
"""
from odoo.tests import TransactionCase, tagged
from odoo.exceptions import ValidationError, UserError
from odoo import fields


@tagged('post_install', '-at_install')
class TestMyModel(TransactionCase):
    """Test suite for my.model: My Model Description."""

    @classmethod
    def setUpClass(cls):
        """Shared fixtures created once for all tests in this class."""
        super().setUpClass()
        cls.env = cls.env(context={
            **cls.env.context,
            'mail_notrack': True,
            'tracking_disable': True,
        })
        cls.company = cls.env.company

    def setUp(self):
        """Fresh records created before each test (auto-rolled back)."""
        super().setUp()
        self.record = self.env['my.model'].create({
            'name': 'Test Record',
        })

    # ── CREATE TESTS ──────────────────────────────────────────────
    def test_create_minimal(self): ...
    def test_create_full(self): ...
    def test_create_missing_required_field(self): ...

    # ── READ / SEARCH TESTS ───────────────────────────────────────
    def test_search_returns_created_record(self): ...
    def test_display_name(self): ...

    # ── WRITE TESTS ───────────────────────────────────────────────
    def test_write_name(self): ...

    # ── DELETE TESTS ──────────────────────────────────────────────
    def test_unlink_draft_record(self): ...

    # ── COMPUTE FIELD TESTS ───────────────────────────────────────
    def test_compute_total_amount(self): ...  # if compute fields exist

    # ── CONSTRAINT TESTS ──────────────────────────────────────────
    def test_sql_constraint_example(self): ...
    def test_python_constraint_validation(self): ...

    # ── BUSINESS METHOD TESTS ─────────────────────────────────────
    def test_action_confirm(self): ...  # for each action_ method found

    # ── MULTI-RECORD TESTS ────────────────────────────────────────
    def test_create_multiple_records(self): ...
```

## Options

| Option | Description |
|--------|-------------|
| `--module PATH` | Path to the module directory (enables field detection) |
| `--output PATH` | Custom output file path |
| `--dry-run` | Print generated code to stdout without writing files |
| `--force` | Overwrite existing test file |

## After Generation

1. Review the generated `tests/test_<model>.py` file
2. Adjust field values in `setUpClass()` to use real fixtures
3. Fill in missing assertion logic
4. Run: `python -m odoo -c conf/project17.conf -d db --test-enable -u my_module --stop-after-init`

---

*Part of odoo-test-plugin v1.0*
